<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<script>
    window.onload = function(){
        var color = document.getElementById("color");
        var canvas = document.querySelector("canvas");
        var cobj = canvas.getContext("2d");
        var arr = [];
        var colorVlue = color.value;

        //颜色 color
        color.onchange = function(){
            colorVlue = color.value;
        };

        //画直线
        canvas.onmousedown = function(e){
            var sx = e.offsetX;
            var sy = e.offsetY;
            var mx = 0;
            var my = 0;
            canvas.onmousemove = function(e){
                cobj.clearRect(0,0,canvas.width,canvas.height);
                if(arr.length>0){
                    cobj.putImageData(arr[arr.length-1],0,0)
                }
                mx = e.offsetX;
                my = e.offsetY;
//                cobj.beginPath();
//                cobj.fillStyle=colorVlue;
//                cobj.strokeStyle = colorVlue;
//                cobj.lineWidth=10;
//                cobj.strokeRect(sx,sy,mx-sx,my-sy);
//                cobj.fillRect(sx,sy,mx-sx,my-sy);
//                cobj.strokeStyle = colorVlue;
//                cobj.moveTo(sx,sy);
//                cobj.lineTo(mx,my);
//                cobj.stroke();
                cobj.beginPath();
                cobj.strokeStyle = colorVlue;
                cobj.fillRect(sx,sy,mx-sx,my-sy);
                cobj.closePath();
                cobj.stroke();
            };
            canvas.onmouseup = function(e){
                arr.push(cobj.getImageData(0,0,canvas.width,canvas.height));
                canvas.onmousemove = null;
                canvas.onmouseup = null;
            }
        };

        function line(x1,y1,x2,y2){
            cobj.beginPath();
            cobj.moveTo(x1,y1); //确定一个起始点
            cobj.lineTo(x2,y2);
            cobj.stroke();
        }
    }
</script>
<body>
<div class="box">
    <div class="small">
        <div><input type="color" id="color"></div>
        <div>直线</div>
        <div>曲线</div>
    </div>
    <canvas width="1000" height="500"></canvas>
</div>
</body>
</html>